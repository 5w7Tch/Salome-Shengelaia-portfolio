<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=10.0, user-scalable=yes" />
  
  <!-- Primary Meta Tags -->
  <title>Salome Shengelaia - Portfolio</title>
  <meta name="title" content="Salome Shengelaia - Portfolio">
  <meta name="description" content="Explore Salome Shengelaia's creative portfolio - An interactive digital flipbook showcasing design work and projects.">
  <meta name="author" content="Salome Shengelaia">
  <meta name="keywords" content="portfolio, design, creative, Salome Shengelaia">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yourusername.github.io/portfolio/">
  <meta property="og:title" content="Salome Shengelaia - Portfolio">
  <meta property="og:description" content="Explore Salome Shengelaia's creative portfolio - An interactive digital flipbook showcasing design work and projects.">
  <meta property="og:image" content="https://yourusername.github.io/portfolio/salome.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Salome Shengelaia Portfolio">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://yourusername.github.io/portfolio/">
  <meta property="twitter:title" content="Salome Shengelaia - Portfolio">
  <meta property="twitter:description" content="Explore Salome Shengelaia's creative portfolio - An interactive digital flipbook showcasing design work and projects.">
  <meta property="twitter:image" content="https://yourusername.github.io/portfolio/salome.png">

  <!-- LinkedIn specific -->
  <meta property="og:locale" content="en_US">
  <meta property="article:author" content="Salome Shengelaia">

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="salome.png" />
</head>

<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loader-container">
      <div class="loader"></div>
      <p class="loading-text">Loading Portfolio...</p>
      <p class="loading-progress" id="loadingProgress">0%</p>
    </div>
  </div>

  <!-- Background loading indicator -->
  <div class="bg-loading-indicator" id="bgLoadingIndicator" style="display: none;">
    <div class="bg-loader"></div>
    <span id="bgLoadingText">Loading pages...</span>
  </div>

  <!-- Zoom Controls -->
  <div class="zoom-controls" id="zoomControls">
    <button class="zoom-btn" id="zoomIn" title="Zoom In">+</button>
    <button class="zoom-btn" id="zoomOut" title="Zoom Out">‚àí</button>
    <button class="zoom-btn" id="zoomReset" title="Reset Zoom">‚ü≤</button>
    <span class="zoom-level" id="zoomLevel">100%</span>
  </div>

  <button class="nav-arrow prev-arrow" id="prevBtn">‚Äπ</button>
  <button class="nav-arrow next-arrow" id="nextBtn">‚Ä∫</button>

  <div class="flipbook-container" id="flipbookContainer">
    <div class="flipbook" id="flipbook">
      <!-- Dynamic pages will be inserted here -->
      <div class="hard"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="jquery.js"></script>
  <script src="turn.js"></script>
  <script>
    // Configure PDF.js worker
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

    // Path to your PDF file
    const pdfPath = 'PORTFOLIOOO.pdf';
    let loadedPages = new Set();
    let totalPagesCount = 0;
    let flipbookInitialized = false;
    let isAnimating = false;
    let pdfDocument = null;
    let renderQueue = new Map();
    let pageCanvases = new Map();

    // Zoom functionality
    let currentZoom = 1.0;
    let isPanning = false;
    let startX = 0;
    let startY = 0;
    let translateX = 0;
    let translateY = 0;

    // FULL QUALITY
    const RENDER_QUALITY = 3.0;
    const pixelRatio = window.devicePixelRatio || 1;

    console.log('üé® FULL QUALITY MODE with ZOOM support');

    // Zoom functions
    function updateZoom(newZoom) {
      currentZoom = Math.max(0.5, Math.min(5.0, newZoom)); // Min 50%, Max 500%
      const container = document.getElementById('flipbookContainer');
      const flipbook = document.getElementById('flipbook');
      
      flipbook.style.transform = `scale(${currentZoom}) translate(${translateX}px, ${translateY}px)`;
      flipbook.style.transformOrigin = 'center center';
      
      // Update zoom level display
      document.getElementById('zoomLevel').textContent = Math.round(currentZoom * 100) + '%';
      
      // Enable/disable overflow scrolling based on zoom
      if (currentZoom > 1.0) {
        container.style.overflow = 'auto';
        container.style.cursor = 'grab';
      } else {
        container.style.overflow = 'hidden';
        container.style.cursor = 'default';
        translateX = 0;
        translateY = 0;
      }
      
      console.log(`üîç Zoom: ${Math.round(currentZoom * 100)}%`);
    }

    function zoomIn() {
      updateZoom(currentZoom + 0.25);
    }

    function zoomOut() {
      updateZoom(currentZoom - 0.25);
    }

    function resetZoom() {
      currentZoom = 1.0;
      translateX = 0;
      translateY = 0;
      updateZoom(1.0);
    }

    // Pan functionality
    function initPanning() {
      const flipbook = document.getElementById('flipbook');
      const container = document.getElementById('flipbookContainer');
      
      flipbook.addEventListener('mousedown', (e) => {
        if (currentZoom > 1.0) {
          isPanning = true;
          startX = e.clientX - translateX;
          startY = e.clientY - translateY;
          flipbook.style.cursor = 'grabbing';
          e.preventDefault();
        }
      });

      document.addEventListener('mousemove', (e) => {
        if (isPanning && currentZoom > 1.0) {
          translateX = e.clientX - startX;
          translateY = e.clientY - startY;
          flipbook.style.transform = `scale(${currentZoom}) translate(${translateX}px, ${translateY}px)`;
        }
      });

      document.addEventListener('mouseup', () => {
        if (isPanning) {
          isPanning = false;
          const flipbook = document.getElementById('flipbook');
          flipbook.style.cursor = 'grab';
        }
      });

      // Touch support for mobile
      flipbook.addEventListener('touchstart', (e) => {
        if (currentZoom > 1.0 && e.touches.length === 1) {
          isPanning = true;
          startX = e.touches[0].clientX - translateX;
          startY = e.touches[0].clientY - translateY;
        }
      });

      flipbook.addEventListener('touchmove', (e) => {
        if (isPanning && currentZoom > 1.0 && e.touches.length === 1) {
          translateX = e.touches[0].clientX - startX;
          translateY = e.touches[0].clientY - startY;
          flipbook.style.transform = `scale(${currentZoom}) translate(${translateX}px, ${translateY}px)`;
          e.preventDefault();
        }
      });

      flipbook.addEventListener('touchend', () => {
        isPanning = false;
      });

      // Pinch zoom support
      let initialDistance = 0;
      let initialZoom = 1.0;

      flipbook.addEventListener('touchstart', (e) => {
        if (e.touches.length === 2) {
          isPanning = false;
          initialDistance = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          initialZoom = currentZoom;
        }
      });

      flipbook.addEventListener('touchmove', (e) => {
        if (e.touches.length === 2) {
          const distance = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          const scale = distance / initialDistance;
          updateZoom(initialZoom * scale);
          e.preventDefault();
        }
      });

      // Mouse wheel zoom
      container.addEventListener('wheel', (e) => {
        if (e.ctrlKey || e.metaKey) {
          e.preventDefault();
          const delta = e.deltaY > 0 ? -0.1 : 0.1;
          updateZoom(currentZoom + delta);
        }
      }, { passive: false });
    }

    // Update loading progress
    function updateProgress(current, total) {
      const percentage = Math.round((current / total) * 100);
      $('#loadingProgress').text(percentage + '%');
    }

    // Hide initial loading screen
    function hideLoadingScreen() {
      $('#loadingScreen').fadeOut(500, function() {
        $(this).remove();
      });
    }

    // Update background loading indicator
    function updateBackgroundLoading(current, total) {
        $('#bgLoadingIndicator').fadeOut();

      // if (current >= total) {
      //   $('#bgLoadingIndicator').fadeOut();
      // } else {
      //   $('#bgLoadingText').text(`Loading pages... ${current}/${total}`);
      // }
    }

    // Create placeholder page
    function createPlaceholderPage() {
      const pageDiv = $('<div class="page page-loading"></div>');
      pageDiv.html('<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666;"><div><div class="loader" style="margin: 0 auto 20px;"></div><p>Loading page...</p></div></div>');
      return pageDiv;
    }

    // Render a single page at MAXIMUM QUALITY
    async function renderPage(pdf, pageNum, pageDiv, priority = false) {
      if (renderQueue.has(pageNum)) {
        console.log(`‚è≥ Page ${pageNum} already rendering, waiting...`);
        return renderQueue.get(pageNum);
      }

      if (pageCanvases.has(pageNum)) {
        console.log(`‚úÖ Page ${pageNum} already rendered`);
        const existingCanvas = pageCanvases.get(pageNum);
        pageDiv.empty();
        pageDiv.removeClass('page-loading');
        pageDiv.append(existingCanvas.cloneNode(true));
        loadedPages.add(pageNum);
        updateBackgroundLoading(loadedPages.size, totalPagesCount);
        return true;
      }

      const renderPromise = (async () => {
        try {
          console.log(`üé® Rendering page ${pageNum} at MAXIMUM QUALITY`);
          
          const page = await pdf.getPage(pageNum);
          const canvas = document.createElement('canvas');
          const context = canvas.getContext('2d', { 
            alpha: false,
            desynchronized: true,
            willReadFrequently: false
          });
          
          const viewport = page.getViewport({ scale: 1 });
          const displayScale = Math.min(594 / viewport.width, 840 / viewport.height);
          const renderScale = displayScale * RENDER_QUALITY * pixelRatio;
          
          const scaledViewport = page.getViewport({ scale: renderScale });
          
          canvas.width = scaledViewport.width;
          canvas.height = scaledViewport.height;
          
          console.log(`üñºÔ∏è Page ${pageNum}: ${canvas.width}x${canvas.height}`);
          
          canvas.style.width = '100%';
          canvas.style.height = '100%';
          canvas.style.display = 'block';
          
          const renderContext = {
            canvasContext: context,
            viewport: scaledViewport,
            intent: 'display',
            renderInteractiveForms: true,
            enableWebGL: true,
            background: 'white',
            imageLayer: null,
            annotationMode: pdfjsLib.AnnotationMode.ENABLE_FORMS,
            optionalContentConfigPromise: null
          };

          const renderTask = page.render(renderContext);
          await Promise.race([
            renderTask.promise,
            new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 120000))
          ]);
          
          console.log(`‚úÖ Page ${pageNum} rendered`);
          
          pageCanvases.set(pageNum, canvas.cloneNode(true));
          
          pageDiv.empty();
          pageDiv.removeClass('page-loading');
          pageDiv.append(canvas);
          
          loadedPages.add(pageNum);
          updateBackgroundLoading(loadedPages.size, totalPagesCount);
          
          page.cleanup();
          renderQueue.delete(pageNum);
          
          return true;
        } catch (error) {
          console.error(`‚ùå Error rendering page ${pageNum}:`, error);
          pageDiv.html(`<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #ff4444; padding: 20px; text-align: center;">
            <div>
              <p style="font-weight: bold;">Error loading page ${pageNum}</p>
              <p style="font-size: 12px; margin-top: 10px;">${error.message}</p>
              <button onclick="location.reload()" style="margin-top: 15px; padding: 10px 20px; cursor: pointer; background: #ff4444; color: white; border: none; border-radius: 4px;">Reload</button>
            </div>
          </div>`);
          renderQueue.delete(pageNum);
          return false;
        }
      })();

      renderQueue.set(pageNum, renderPromise);
      return renderPromise;
    }

    async function loadPDF() {
      try {
        console.log('üìÑ Loading PDF with MAXIMUM QUALITY + ZOOM');
        
        const loadingTask = pdfjsLib.getDocument({
          url: pdfPath,
          maxImageSize: -1,
          cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/',
          cMapPacked: true,
          disableAutoFetch: false,
          disableStream: false,
          disableFontFace: false,
          useSystemFonts: false,
          standardFontDataUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/standard_fonts/',
          isEvalSupported: true,
          useWorkerFetch: true,
          verbosity: 1
        });
        
        loadingTask.onProgress = function(progress) {
          if (progress.total > 0) {
            const percentage = Math.round((progress.loaded / progress.total) * 100);
            $('#loadingProgress').text(percentage + '%');
          }
        };
        
        pdfDocument = await loadingTask.promise;
        totalPagesCount = pdfDocument.numPages;
        
        console.log(`‚úÖ PDF loaded: ${totalPagesCount} pages`);
        
        const flipbook = $('.flipbook');
        const lastHard = flipbook.find('.hard');
        
        for (let pageNum = 1; pageNum <= totalPagesCount; pageNum++) {
          const pageDiv = createPlaceholderPage();
          pageDiv.attr('data-page-num', pageNum);
          pageDiv.insertBefore(lastHard);
        }
        
        initializeFlipbook();
        hideLoadingScreen();
        
        $('#bgLoadingIndicator').fadeIn();
        
        console.log('üé® Rendering initial 4 pages...');
        
        for (let pageNum = 1; pageNum <= Math.min(4, totalPagesCount); pageNum++) {
          const pageDiv = flipbook.find(`.page[data-page-num="${pageNum}"]`);
          await renderPage(pdfDocument, pageNum, pageDiv, true);
          await new Promise(resolve => setTimeout(resolve, 500));
        }
        
        console.log('‚úÖ Initial pages loaded');
        
        $(".flipbook").bind("turning", async function(event, page, view) {
          console.log(`üìñ Turning to page ${page}`);
          
          const pagesToLoad = [];
          
          view.forEach(p => {
            if (p && !loadedPages.has(p) && !renderQueue.has(p)) {
              pagesToLoad.push({ page: p, priority: 10 });
            }
          });
          
          for (let i = 1; i <= 4; i++) {
            const nextPage = page + i;
            if (nextPage <= totalPagesCount && !loadedPages.has(nextPage) && !renderQueue.has(nextPage)) {
              pagesToLoad.push({ page: nextPage, priority: 7 });
            }
          }
          
          for (let i = 1; i <= 2; i++) {
            const prevPage = page - i;
            if (prevPage >= 1 && !loadedPages.has(prevPage) && !renderQueue.has(prevPage)) {
              pagesToLoad.push({ page: prevPage, priority: 5 });
            }
          }
          
          pagesToLoad.sort((a, b) => b.priority - a.priority);
          
          for (let { page: pageNum, priority } of pagesToLoad) {
            const pageDiv = flipbook.find(`.page[data-page-num="${pageNum}"]`);
            if (pageDiv.hasClass('page-loading')) {
              await renderPage(pdfDocument, pageNum, pageDiv, priority >= 8);
              await new Promise(resolve => setTimeout(resolve, priority >= 8 ? 300 : 500));
            }
          }
        });
        
        $(".flipbook").trigger("turning", [1, [1, 2]]);
        
      } catch (error) {
        console.error('‚ùå Error loading PDF:', error);
        $('#loadingText').text('Error loading portfolio');
        $('#loadingProgress').text(error.message || 'Please refresh');
      }
    }

    function initializeFlipbook() {
      const originalWidth = 1188;
      const originalHeight = 840;
      const aspectRatio = originalWidth / originalHeight;
      
      const isMobile = window.innerWidth <= 768;
      const availableWidth = window.innerWidth - (isMobile ? 0 : 80);
      const availableHeight = window.innerHeight - (isMobile ? 80 : 140); // Space for zoom controls
      
      let flipbookWidth, flipbookHeight;
      
      if (availableWidth / availableHeight > aspectRatio) {
        flipbookHeight = availableHeight;
        flipbookWidth = flipbookHeight * aspectRatio;
      } else {
        flipbookWidth = availableWidth;
        flipbookHeight = flipbookWidth / aspectRatio;
      }
      
      flipbookWidth = Math.min(flipbookWidth, originalWidth);
      flipbookHeight = Math.min(flipbookHeight, originalHeight);
      
      console.log('üé¨ Initializing flipbook with zoom support');
      
      $(".flipbook").turn({
        width: flipbookWidth,
        height: flipbookHeight,
        autoCenter: true,
        acceleration: true,
        gradients: true,
        display: 'double',
        duration: 600
      });

      flipbookInitialized = true;

      $(".flipbook").bind("start", function() {
        isAnimating = true;
      });

      $(".flipbook").bind("end", function() {
        isAnimating = false;
      });

      $(document).keydown(function(e) {
        if (isAnimating) {
          e.preventDefault();
          return;
        }
        if (e.keyCode == 37) {
          $('#prevBtn').click();
          e.preventDefault();
        }
        if (e.keyCode == 39) {
          $('#nextBtn').click();
          e.preventDefault();
        }
      });

      $('#prevBtn').click(function() {
        if (isAnimating) return;
        var page = $(".flipbook").turn("page");
        if (page > 1) {
          isAnimating = true;
          $(".flipbook").turn("peel", "bl", true);
          setTimeout(function() {
            $(".flipbook").turn("previous");
          }, 40);
        }
      });

      $('#nextBtn').click(function() {
        if (isAnimating) return;
        var page = $(".flipbook").turn("page");
        var pages = $(".flipbook").turn("pages");
        if (page < pages) {
          isAnimating = true;
          $(".flipbook").turn("peel", "br", true);
          setTimeout(function() {
            $(".flipbook").turn("next");
          }, 40);
        }
      });

      $(".flipbook").bind("turned", function(event, page, view) {
        if (page == 1) {
          $('#prevBtn').fadeOut();
        } else {
          $('#prevBtn').fadeIn();
        }
        if (page == $(".flipbook").turn("pages")) {
          $('#nextBtn').fadeOut();
        } else {
          $('#nextBtn').fadeIn();
        }
      });

      $('#prevBtn').hide();
      
      // Initialize zoom controls
      document.getElementById('zoomIn').addEventListener('click', zoomIn);
      document.getElementById('zoomOut').addEventListener('click', zoomOut);
      document.getElementById('zoomReset').addEventListener('click', resetZoom);
      
      // Initialize panning
      initPanning();
      
      let resizeTimeout;
      $(window).on('resize orientationchange', function() {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(function() {
          location.reload();
        }, 500);
      });
    }

    $(document).ready(function() {
      loadPDF();
    });
  </script>

  <style>
    .flipbook-container {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flipbook {
      transition: transform 0.1s ease-out;
      will-change: transform;
    }

    /* Zoom Controls */
    .zoom-controls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      background: rgba(0, 0, 0, 0.8);
      padding: 10px 15px;
      border-radius: 30px;
      z-index: 10000;
      align-items: center;
    }

    .zoom-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .zoom-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .zoom-btn:active {
      transform: scale(0.95);
    }

    .zoom-level {
      color: white;
      font-size: 14px;
      font-weight: 600;
      min-width: 50px;
      text-align: center;
    }

    .bg-loading-indicator {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 9999;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .bg-loader {
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    .page-loading {
      background: #f5f5f5;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .nav-arrow.animating {
      pointer-events: none;
      opacity: 0.5;
    }

    /* Mobile zoom controls */
    @media screen and (max-width: 768px) {
      .zoom-controls {
        bottom: 10px;
        padding: 8px 12px;
        gap: 8px;
      }

      .zoom-btn {
        width: 35px;
        height: 35px;
        font-size: 18px;
      }

      .zoom-level {
        font-size: 12px;
        min-width: 45px;
      }
    }
  </style>
</body>

</html>